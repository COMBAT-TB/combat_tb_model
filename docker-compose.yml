version: '2'
services:
  vcf2neo:
    build: .
    image: vcf2neo
    container_name: vcf2neo
    environment:
      DB: db
    networks:
      - default
    depends_on:
      - db
  db:
    image: neo4j:3.0.4
    container_name: vcf2neo-db
    volumes_from:
      - dc:rw
    environment:
      NEO4J_AUTH: none
    networks:
      - default
    ports:
      - "7687:7687"
      - "7474:7474"
    depends_on:
      - dc
  dc:
      build: dc/
      container_name: vcf2neo-dc
#join an already existing network. Prevents IP conflict
#networks:
#  default:
#    external:
#      name: combattbweb_default
