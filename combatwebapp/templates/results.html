{% extends "base.html" %}

{% block content %}
    {% if gene %}
        <div class="section">
            <h5>Showing results for {{ gene.name }}</h5><br>
            <iframe src="http://thoba.sanbi.ac.za:8080/?loc=NC_000962.3%3A{{ location }}&tracks=DNA%2CGenes&highlight="
                    frameborder="0"
                    scrolling="no" width="100%" height="370">
            </iframe>
        </div>
        <div class="divider"></div>
        <div class="section">
            {#        {{ gene }} {{ name }}#}
            <div class="row">
                <div class="col s12">
                    <ul class="tabs ">
                        <li class="tab col s3"><a class="light-blue-text text-darken-4 active" href="#gi">General
                            annotation</a>
                        </li>
                        <li class="tab col s3"><a class="light-blue-text text-darken-4" href="#coords">Coordinates</a>
                        </li>
                        <li class="tab col s3"><a class="light-blue-text text-darken-4" href="#orth">Cross-references</a>
                        </li>
                        <li class="tab col s3"><a class="light-blue-text text-darken-4" href="#actor">Interaction</a>
{#                        </li>#}
{#                        <li class="tab col s3"><a class="light-blue-text text-darken-4" href="#pub">Publications</a>#}
{#                        </li>#}
                    </ul>
                </div>
                <div id="gi" class="col s12">
                    <table class="bordered">
                        <tbody>
                        <tr>
                            <th>Gene name</th>
                            <td>{{ gene.name }}</td>
                        </tr>
                        <tr>
                            <th>Preferred name</th>
                            <td>{{ gene.preffered_name or '' }}</td>
                        </tr>
                        <tr>
                            <th>Rv number</th>
                            <td>{{ gene.locus_tag or gene.name }}</td>
                        </tr>
                        <tr></tr>
                        <tr>
                            <th>Type</th>
                            <td>{{ gene.coding or gene.biotype }}</td>
                        </tr>
                        <tr>
                            <th>Function</th>
                            {% if protein.function %}
                                <td>{{ protein.function[9:] }}</td>
                            {% else %}
                                <td>Function unknown</td>
                            {% endif %}
                        </tr>
                        {#                        <tr>#}
                        {#                            <th>Product</th>#}
                        {#                            <td>{{ gene.description }}</td>#}
                        {#                        </tr>#}
                        {#                        <tr></tr>#}
                        <tr>
                            <th>Product</th>
                            <td>{{ gene.description }}</td>
                        </tr>
                        <tr>
                            <th>Molecular mass</th>
                            <td>{{ protein.mass }}</td>
                        </tr>
                        {#                        <tr>#}
                        {#                            <td><b>Isoelectric point</b></td>#}
                        {#                            <td>5.7066</td>#}
                        {#                        </tr>#}
                        {#                        <tr>#}
                        {#                            <td><b>Gene length (bp)</b></td>#}
                        {#                            <td>1074</td>#}
                        {#                        </tr>#}
                        <tr>
                            <td><b>Protein length</b></td>
                            <td>{{ protein.length }}</td>
                        </tr>
                        {#                        <tr>#}
                        {#                            <td><b>Location (kb)</b></td>#}
                        {#                            <td>257.783</td>#}
                        {#                        </tr>#}
                        <tr>
                            <td><b>Publications</b></td>
                            <td>
                            {% if citation %}
                                {% for entry in citation %}
                                    {#                                    <a>{{ entry }}</a>#}
                                    <a target="_blank"
                                       href="http://www.ncbi.nlm.nih.gov/pubmed/?term={{ entry }}">{{ entry }}</a><br>
                                {% endfor %}
                            {% else %}
                                {{ '' }}
                            {% endif %}
                        </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div id="coords" class="col s12">
                    <table class="bordered">
                        <thead>
                        <tr>
                            <th data-field="coding">Type</th>
                            <th data-field="start">Start</th>
                            <th data-field="end">End</th>
                            <th data-field="strand">Strand</th>
                        </tr>
                        </thead>

                        <tbody>
                        <tr>
                            <td>{{ gene.coding or pseudogene }}</td>
                            <td>{{ gene.start }}</td>
                            <td>{{ gene.end }}</td>
                            <td>{{ gene.strand }}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div id="orth" class="col s12">
                    <table class="bordered">
                        <tbody>
{#                        <tr>#}
{#                            <th>CDC1551</th>#}
{#                            <td>{{ ortholog_name or '' }}</td>#}
{#                        </tr>#}
                        <tr>
                            <th>UniProt</th>
                            <td>
                                <a target="_blank"
                                   href="http://www.uniprot.org/uniprot/{{ gene.uniprot_entry or gene.gene_id }}">{{ gene.uniprot_entry or gene.gene_idthoba}}</a>
                            </td>
                        </tr>
                        <tr>
                            <th>TubercuList</th>
                            <td>
                                <a target="_blank"
                                   href="http://tuberculist.epfl.ch/quicksearch.php?gene+name={{ gene.locus_tag or gene.gene_id }}">{{ gene.locus_tag or gene.gene_id }}</a>
                            </td>
                        </tr>
                        <tr>
                            <th>GO</th>
                            <td>
                                {% for entry in go_terms %}
                                    <a target="_blank"
                                       href="http://amigo.geneontology.org/amigo/term/{{ entry.go_id }}">{{ entry.name }}</a><br>
                                {% endfor %}
                            </td>
                            {#                            <td>{{ go_terms }}</td>#}
                        <tr>
                            <th>InterPro</th>
                            <td>
                                {% for entry in inter_pro %}
                                    <a target="_blank"
                                       href="https://www.ebi.ac.uk/interpro/entry/{{ entry }}">{{ entry }} </a><br>
                                {% endfor %}
                            </td>
                            {#                            <td>{{ inter_pro }}</td>#}
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div id="actor" class="col s12">
                    <table class="bordered">
                        <tbody>
                        <tr>
                            <th>MTB</th>
                            <td>
                                {% if interactor %}
                                    {% for actor in interactor %}
                                        <a target="_blank"
                                           href="http://www.uniprot.org/uniprot/{{ actor }}">{{ actor }}</a><br>

                                    {% endfor %}
                                {% else %}
                                    <p></p>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <th>Human</th>
                            <td>
                                {% if interactor %}
                                    {% for actor in h_interact %}
                                        <a target="_blank"
                                           href="http://www.uniprot.org/uniprot/{{ actor }}">{{ actor }}</a><br>
                                    {% endfor %}
                                {% else %}
                                    <p></p>
                                {% endif %}

                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
{#                <div id="pub" class="col s12">#}
{#                    <table class="bordered">#}
{#                        <tbody>#}
{#                        <th>Publications</th>#}
{#                        <td>#}
{#                            {% if citation %}#}
{#                                {% for entry in citation %}#}
                                    {#                                    <a>{{ entry }}</a>#}
{#                                    <a target="_blank"#}
{#                                       href="http://www.ncbi.nlm.nih.gov/pubmed/?term={{ entry }}">{{ entry }}</a><br>#}
{#                                {% endfor %}#}
{#                            {% else %}#}
{#                                {{ '' }}#}
{#                            {% endif %}#}
{#                        </td>#}
{#                        </tbody>#}
{#                    </table>#}
{#                </div>#}
            </div>
        </div>
    {% else %}
        <div class="section">
            <h5>No Results</h5>
            <p>Could not find {{ term }}</p>
        </div>
    {% endif %}
{% endblock %}
{% block js %}
{% endblock %}